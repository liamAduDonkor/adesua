import{u as f,r as g,j as e,H as j,L as i}from"./app-DZ0vWX43.js";import{A as N}from"./admin-sidebar-layout-YkU-jgrI.js";import{d as b}from"./index-CwYsXsqK.js";/* empty css            */import"./app-sidebar-header-CGXF-lXY.js";import"./app-shell-DnHRLfMH.js";import"./button-CEleBrLa.js";import"./index-6yBPn8VC.js";import"./index-BYSkaRvI.js";import"./createLucideIcon-ClVFSv6n.js";import"./input-CHJX23Ty.js";import"./app-logo-icon-oqHP0DX7.js";import"./wallet-BuoZZyNv.js";import"./users-CQbd8oD2.js";const v=[{title:"Adesua",href:b().url},{title:"Admin",href:"/admin"},{title:"Search Students",href:"/admin/search/students"}];function H(){const{students:l,filters:n,schools:o}=f().props,[r,m]=g.useState(n),x=()=>{const a=new URLSearchParams;Object.entries(r).forEach(([s,t])=>{t&&a.append(s,t)}),window.location.href=`/admin/search/students?${a.toString()}`},h=a=>a?a>=80?"text-green-600":a>=60?"text-yellow-600":"text-red-600":"text-gray-500",u=a=>a?a>=80?"Excellent":a>=60?"Good":a>=40?"Satisfactory":"Needs Improvement":"No Data",p=a=>{const s=new Date,t=new Date(a);let d=s.getFullYear()-t.getFullYear();const c=s.getMonth()-t.getMonth();return(c<0||c===0&&s.getDate()<t.getDate())&&d--,d};return e.jsxs(N,{breadcrumbs:v,children:[e.jsx(j,{title:"Admin - Search Students"}),e.jsxs("div",{className:"flex h-full flex-1 flex-col gap-4 overflow-x-auto rounded-xl p-4",children:[e.jsx("h1",{className:"text-xl font-semibold",children:"Search Students"}),e.jsx("p",{className:"mt-2 text-sm text-neutral-600 dark:text-neutral-300",children:"Search and analyze student performance across all schools."}),e.jsxs("div",{className:"rounded-md border p-4",children:[e.jsx("h3",{className:"text-lg font-medium mb-4",children:"Search Filters"}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2 lg:grid-cols-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Search Term"}),e.jsx("input",{type:"text",value:r.search||"",onChange:a=>m({...r,search:a.target.value}),placeholder:"Name, email, student number...",className:"w-full rounded-md border border-gray-300 px-3 py-2 text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"School"}),e.jsxs("select",{value:r.school_id||"",onChange:a=>m({...r,school_id:a.target.value}),className:"w-full rounded-md border border-gray-300 px-3 py-2 text-sm",children:[e.jsx("option",{value:"",children:"All Schools"}),o.map(a=>e.jsx("option",{value:a.id,children:a.name},a.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Class"}),e.jsx("input",{type:"text",value:r.class||"",onChange:a=>m({...r,class:a.target.value}),placeholder:"Class level...",className:"w-full rounded-md border border-gray-300 px-3 py-2 text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Academic Year"}),e.jsx("input",{type:"text",value:r.academic_year||"",onChange:a=>m({...r,academic_year:a.target.value}),placeholder:"2023/2024...",className:"w-full rounded-md border border-gray-300 px-3 py-2 text-sm"})]})]}),e.jsx("div",{className:"mt-4",children:e.jsx("button",{onClick:x,className:"rounded-md bg-blue-600 px-4 py-2 text-sm font-medium text-white hover:bg-blue-700",children:"Search"})})]}),e.jsxs("div",{className:"rounded-md border p-4",children:[e.jsxs("h3",{className:"text-lg font-medium mb-4",children:["Search Results (",l.data.length,")"]}),l.data.length===0?e.jsx("p",{className:"text-gray-500",children:"No students found matching your criteria."}):e.jsx("div",{className:"space-y-4",children:l.data.map(a=>{var s,t,d;return e.jsx("div",{className:"rounded-md border p-4",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-medium",children:a.name}),e.jsx("p",{className:"text-sm text-gray-600",children:a.email}),e.jsxs("div",{className:"mt-2 grid grid-cols-1 gap-2 text-sm md:grid-cols-3",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Student Number:"})," ",a.student_number]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Class:"})," ",a.class]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"School:"})," ",a.school_name]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Age:"})," ",p(a.date_of_birth)," years"]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Guardian Phone:"})," ",a.guardian_phone]})]})]}),e.jsxs("div",{className:"ml-4 text-right",children:[a.performance_summary?e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("div",{className:`font-medium ${h(a.performance_summary.avg_score)}`,children:[((s=a.performance_summary.avg_score)==null?void 0:s.toFixed(1))||"N/A"," - ",u(a.performance_summary.avg_score)]}),e.jsxs("div",{className:"text-gray-600",children:["Attendance: ",((t=a.performance_summary.avg_attendance)==null?void 0:t.toFixed(1))||"N/A","%"]}),e.jsxs("div",{className:"text-gray-600",children:["Punctuality: ",((d=a.performance_summary.avg_punctuality)==null?void 0:d.toFixed(1))||"N/A","%"]}),e.jsxs("div",{className:"text-gray-600",children:["Records: ",a.performance_summary.total_records]})]}):e.jsx("div",{className:"text-sm text-gray-500",children:"No performance data"}),e.jsx("div",{className:"mt-2",children:e.jsx(i,{href:`/admin/performance/student/${a.id}`,className:"text-blue-600 hover:text-blue-800 text-sm",children:"View Details â†’"})})]})]})},a.id)})})]}),l.links&&l.links.length>3&&e.jsx("div",{className:"flex justify-center",children:e.jsx("nav",{className:"flex space-x-2",children:l.links.map((a,s)=>e.jsx(i,{href:a.url||"#",className:`px-3 py-2 text-sm rounded-md ${a.active?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,dangerouslySetInnerHTML:{__html:a.label}},s))})})]})]})}export{H as default};
